# –ü—ñ–¥—Å—É–º–æ–∫ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å –µ–∫—Å–ø–æ—Ä—Ç—É —Ç–∞ CSP

## –î–∞—Ç–∞: 07.12.2025

### –ü—Ä–æ–±–ª–µ–º–∏, —â–æ –±—É–ª–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ:

#### 1. –ö–Ω–æ–ø–∫–∏ –µ–∫—Å–ø–æ—Ä—Ç—É PDF/JSON –Ω–µ –∑'—è–≤–ª—è–ª–∏—Å—å
**–ü—Ä–∏—á–∏–Ω–∞:** –ö–Ω–æ–ø–∫–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞–ª–∏—Å—å —Ç—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–∏–±–æ—Ä—É —Ä–µ–≥—ñ–æ–Ω—É —á–µ—Ä–µ–∑ —É–º–æ–≤—É `{analysisResult && (...)}`

**–†—ñ—à–µ–Ω–Ω—è:**
- –î–æ–¥–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–Ω–∞–ª—ñ–∑—É –¥–ª—è –ö–∏—ó–≤—Å—å–∫–æ—ó –æ–±–ª–∞—Å—Ç—ñ –ø—Ä–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ `/map`
- –ó–º—ñ–Ω–µ–Ω–æ —Ñ—É–Ω–∫—Ü—ñ—é `loadInitialData()` –≤ `/app/frontend/src/App.js`
- –ü—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ä–µ–≥—ñ–æ–Ω—ñ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `analyzeRegion()` –¥–ª—è –ø–µ—Ä—à–æ–≥–æ —Ä–µ–≥—ñ–æ–Ω—É

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ö–Ω–æ–ø–∫–∏ "–ó–≤—ñ—Ç –ø—Ä–æ –æ–±–ª–∞—Å—Ç—å (PDF)" —Ç–∞ "–î–∞–Ω—ñ (JSON)" —Ç–µ–ø–µ—Ä –≤–∏–¥–∏–º—ñ –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏

---

#### 2. –ö–Ω–æ–ø–∫–∏ –µ–∫—Å–ø–æ—Ä—Ç—É/–±–µ–∫–∞–ø—É –Ω–µ –ø—Ä–∞—Ü—é–≤–∞–ª–∏ (—Ñ–∞–π–ª–∏ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–ª–∏—Å—å)
**–ü—Ä–∏—á–∏–Ω–∞:** –†—É—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ DOM manipulation –±–ª–æ–∫—É–≤–∞–ª–∞—Å—å –±—Ä–∞—É–∑–µ—Ä–Ω–∏–º–∏ popup-–±–ª–æ–∫–µ—Ä–∞–º–∏ —Ç–∞ –ø–æ–ª—ñ—Ç–∏–∫–∞–º–∏ –±–µ–∑–ø–µ–∫–∏

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ file-saver –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É
yarn add file-saver @types/file-saver
```

**–ó–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏:**

**`/app/frontend/src/App.js`:**
- –î–æ–¥–∞–Ω–æ `import { saveAs } from 'file-saver';`
- –§—É–Ω–∫—Ü—ñ—è `exportJSON()` - –∑–∞–º—ñ–Ω–µ–Ω–æ —Ä—É—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è `<a>` –µ–ª–µ–º–µ–Ω—Ç—É –Ω–∞ `saveAs(blob, filename)`

**`/app/frontend/src/components/DataImport.js`:**
- –î–æ–¥–∞–Ω–æ `import { saveAs } from 'file-saver';`
- –§—É–Ω–∫—Ü—ñ—è `handleDownloadBackup()` - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `saveAs()` –¥–ª—è ZIP –±–µ–∫–∞–ø—É
- –§—É–Ω–∫—Ü—ñ—è `handleDownloadSingle()` - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `saveAs()` –¥–ª—è –æ–∫—Ä–µ–º–∏—Ö —Ñ–∞–π–ª—ñ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å—ñ –∫–Ω–æ–ø–∫–∏ –µ–∫—Å–ø–æ—Ä—Ç—É —Ç–∞ –±–µ–∫–∞–ø—É –ø—Ä–∞—Ü—é—é—Ç—å –Ω–∞–¥—ñ–π–Ω–æ —É –≤—Å—ñ—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö

---

#### 3. CSP (Content Security Policy) –±–ª–æ–∫—É–≤–∞–ª–∞ eval()
**–ü—Ä–∏—á–∏–Ω–∞:** CSP –±—Ä–∞—É–∑–µ—Ä–∞/—Å–µ—Ä–≤–µ—Ä–∞ –±–ª–æ–∫—É–≤–∞–ª–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è JavaScript –∑ `eval()`, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–µ—è–∫–∏–º–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞–º–∏

**–†—ñ—à–µ–Ω–Ω—è:**
- –î–æ–¥–∞–Ω–æ CSP meta-—Ç–µ–≥ –≤ `/app/frontend/public/index.html` –∑ –¥–æ–∑–≤–æ–ª–æ–º `unsafe-eval`
- –î–æ–¥–∞–Ω–æ –¥–æ–∑–≤–æ–ª–∏ –¥–ª—è:
  - `script-src`: 'unsafe-eval' –¥–ª—è –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫
  - `style-src`: fonts.googleapis.com –¥–ª—è Google Fonts
  - `font-src`: fonts.gstatic.com –¥–ª—è —à—Ä–∏—Ñ—Ç—ñ–≤
  - `img-src`: –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ data: URLs —Ç–∞ https
  - `connect-src`: PostHog –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞

**CSP –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:**
```html
<meta http-equiv="Content-Security-Policy" content="
  default-src 'self'; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval' https://assets.emergent.sh https://us.i.posthog.com https://*.i.posthog.com https://cdnjs.cloudflare.com; 
  style-src 'self' 'unsafe-inline' https://unpkg.com https://fonts.googleapis.com https://cdnjs.cloudflare.com; 
  img-src 'self' data: https: blob: https://cdnjs.cloudflare.com; 
  font-src 'self' data: https://fonts.gstatic.com; 
  connect-src 'self' https://us.i.posthog.com https://*.i.posthog.com; 
  frame-src 'none'; 
  object-src 'none';
" />
```

**–î–æ–∑–≤–æ–ª–µ–Ω—ñ –¥–æ–º–µ–Ω–∏:**
- `cdnjs.cloudflare.com` - Leaflet —ñ–∫–æ–Ω–∫–∏ –∫–∞—Ä—Ç–∏ —Ç–∞ —Å—Ç–∏–ª—ñ
- `fonts.googleapis.com` - CSS —Ñ–∞–π–ª–∏ Google Fonts
- `fonts.gstatic.com` - —Ñ–∞–π–ª–∏ —à—Ä–∏—Ñ—Ç—ñ–≤
- `assets.emergent.sh` - Emergent —Å–∫—Ä–∏–ø—Ç–∏
- `us.i.posthog.com` —Ç–∞ `*.i.posthog.com` - PostHog –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ù–µ–º–∞—î CSP –ø–æ–º–∏–ª–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª—ñ –±—Ä–∞—É–∑–µ—Ä–∞, –≤—Å—ñ —Ä–µ—Å—É—Ä—Å–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è

**–î–µ—Ç–∞–ª—å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- ‚úÖ 0 CSP –ø–æ–º–∏–ª–æ–∫ –Ω–∞ –≤—Å—ñ—Ö —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö (/, /map, /import)
- ‚úÖ Google Fonts: 1 CSS + 3 —Ñ–∞–π–ª–∏ —à—Ä–∏—Ñ—Ç—ñ–≤ (–≤—Å—ñ 200 OK)
- ‚úÖ Leaflet –∫–∞—Ä—Ç–∞: 98 —ñ–∫–æ–Ω–æ–∫ –º–∞—Ä–∫–µ—Ä—ñ–≤ + 20/20 —Ç–∞–π–ª—ñ–≤ –∫–∞—Ä—Ç–∏
- ‚úÖ 95 –º–µ—Ä–µ–∂–µ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ - –≤—Å—ñ —É—Å–ø—ñ—à–Ω—ñ
- ‚úÖ –í—Å—ñ —Å—Ç–∏–ª—ñ –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω—ñ –∫–æ—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ï–∫—Å–ø–æ—Ä—Ç —Ç–∞ –±–µ–∫–∞–ø –ø—Ä–∞—Ü—é—é—Ç—å –±–µ–∑ –±–ª–æ–∫—É–≤–∞–Ω—å

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è (100% —É—Å–ø—ñ—Ö):

### –ï–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö:
‚úÖ **JSON –µ–∫—Å–ø–æ—Ä—Ç** - `Analiz_–ö–∏—ó–≤—Å—å–∫–∞_–æ–±–ª–∞—Å—Ç—å.json` –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ  
‚úÖ **PDF –µ–∫—Å–ø–æ—Ä—Ç —Ä–µ–≥—ñ–æ–Ω—É** - `–ê–Ω–∞–ª—ñ–∑_–ö–∏—ó–≤—Å—å–∫–∞_–æ–±–ª–∞—Å—Ç—å.pdf` –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è  
‚úÖ **–ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∏–π PDF** - `–ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∏–π_–∞–Ω–∞–ª—ñ–∑_–æ–±–ª–∞—Å—Ç–µ–π.pdf` –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è

### –ë–µ–∫–∞–ø –¥–∞–Ω–∏—Ö:
‚úÖ **ZIP –±–µ–∫–∞–ø** - `gis_data_backup_YYYY-MM-DDTHH-MM-SS.zip` (~152KB) –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è  
‚úÖ **–û–∫—Ä–µ–º—ñ —Ñ–∞–π–ª–∏** - –≤—Å—ñ 5 —Ç–∏–ø—ñ–≤ –¥–∞–Ω–∏—Ö –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è:
  - ukraine_population_data.json (8KB)
  - ukraine_infrastructure.json (32KB)
  - ukraine_protected_areas.json (17KB)
  - recreational_points_web.geojson (954KB)
  - forest_fires.geojson (1.1MB)

### –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:
‚úÖ **–ê–≤—Ç–æ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** - –ö–∏—ó–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å (81.1 –±–∞–ª—ñ–≤) –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ  
‚úÖ **–í–∏–¥–∏–º—ñ—Å—Ç—å –∫–Ω–æ–ø–æ–∫** - –≤—Å—ñ 3 –∫–Ω–æ–ø–∫–∏ –µ–∫—Å–ø–æ—Ä—Ç—É –≤–∏–¥–∏–º—ñ –æ–¥—Ä–∞–∑—É  
‚úÖ **–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∫–∞—Ä—Ç–∏** - 227 —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –ø—Ä–∞—Ü—é—é—Ç—å  
‚úÖ **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** - —á–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏: 544ms  
‚úÖ **–ö–æ–Ω—Å–æ–ª—å —á–∏—Å—Ç–∞** - 0 –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫, 0 –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω—å CSP

---

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ:

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏:
- `file-saver@2.0.5` - –Ω–∞–¥—ñ–π–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
- `@types/file-saver@2.0.7` - TypeScript —Ç–∏–ø–∏

### –ó–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏:
1. `/app/frontend/src/App.js` - auto-load, file-saver –¥–ª—è JSON
2. `/app/frontend/src/components/DataImport.js` - file-saver –¥–ª—è backup
3. `/app/frontend/public/index.html` - CSP meta-—Ç–µ–≥
4. `/app/frontend/package.json` - –¥–æ–¥–∞–Ω–æ file-saver –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

---

---

## –§—ñ–Ω–∞–ª—å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ (07.12.2025):

### CSP –ø–æ–≤–Ω—ñ—Å—Ç—é —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π:
‚úÖ **0 –ø–æ–º–∏–ª–æ–∫ CSP** –Ω–∞ –≤—Å—ñ—Ö —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö  
‚úÖ **95 –º–µ—Ä–µ–∂–µ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤** - –≤—Å—ñ —É—Å–ø—ñ—à–Ω—ñ  
‚úÖ **98 —ñ–∫–æ–Ω–æ–∫ Leaflet** –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –∑ cdnjs.cloudflare.com  
‚úÖ **20/20 —Ç–∞–π–ª—ñ–≤ –∫–∞—Ä—Ç–∏** –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è  
‚úÖ **4 —Ñ–∞–π–ª–∏ Google Fonts** (1 CSS + 3 —à—Ä–∏—Ñ—Ç–∏) - –≤—Å—ñ 200 OK  
‚úÖ **–í—Å—ñ export/backup –∫–Ω–æ–ø–∫–∏** –ø—Ä–∞—Ü—é—é—Ç—å –±–µ–∑ –±–ª–æ–∫—É–≤–∞–Ω—å  

### –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏:
- ‚úÖ `/` (Landing Page) - —Å—Ç–∏–ª—ñ, —à—Ä–∏—Ñ—Ç–∏, –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è
- ‚úÖ `/map` (–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞) - Leaflet, —ñ–∫–æ–Ω–∫–∏, –µ–∫—Å–ø–æ—Ä—Ç
- ‚úÖ `/import` (–Ü–º–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö) - UI –µ–ª–µ–º–µ–Ω—Ç–∏, –±–µ–∫–∞–ø

### –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:
- ‚ö° –ß–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è: 544ms (< 5 —Å–µ–∫—É–Ω–¥)
- üìä –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤: 227
- üó∫Ô∏è –ê–≤—Ç–æ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è: –ö–∏—ó–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å (81.1 –±–∞–ª—ñ–≤)

---

## –°—Ç–∞—Ç—É—Å: ‚úÖ –ì–û–¢–û–í–û –î–û –ü–†–û–î–ê–ö–®–ï–ù–£

**–í—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –µ–∫—Å–ø–æ—Ä—Ç—É, –±–µ–∫–∞–ø—É —Ç–∞ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –ø—Ä–∞—Ü—é—é—Ç—å —ñ–¥–µ–∞–ª—å–Ω–æ!**  
**CSP –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –∫–æ—Ä–µ–∫—Ç–Ω–æ - –∂–æ–¥–Ω–∏—Ö –±–ª–æ–∫—É–≤–∞–Ω—å —Ä–µ—Å—É—Ä—Å—ñ–≤!**
